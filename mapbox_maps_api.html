<!DOCTYPE html>
<html lang="en">
<head>
    <script src="js/mapbox-geocoder-utils.js"></script>
    <script src="js/keys.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css' rel='stylesheet' />
    <meta charset="UTF-8">
    <title>MapBox Maps Exercise</title>
</head>
<body>
<h1 class="text-center">Mapbox</h1>
<div id='map' style='width: 100%; height: 90vh;'></div>
<script>
    mapboxgl.accessToken = mapBoxKey;
    let map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 11.5,
        center: [-98.61251, 29.520899]
    });

    // geocode('3505 Wurzbach Rd #102, San Antonio, TX 78238', mapBoxKey).then(function(result){
    //     console.log(result);
    // });
    // let marker = new mapboxgl.Marker()
    // marker.setLngLat({lng: -98.623396, lat: 29.47171})
    // marker.addTo(map);
    // let popup = new mapboxgl.Popup();
    // popup.setHTML('<h6>Sichuan House</h6>');
    // marker.setPopup(popup);
    //
    //
    // geocode('6417 Evers Rd, Leon Valley, TX 78238', mapBoxKey).then(function(result){
    //    console.log(result);
    // });
    // let markerTwo = new mapboxgl.Marker()
    // markerTwo.setLngLat({lng: -98.61251, lat: 29.500899})
    // markerTwo.addTo(map);
    // let popupTwo = new mapboxgl.Popup();
    // popupTwo.setHTML('<h6>Leon Valley Cafe</h6>');
    // markerTwo.setPopup(popupTwo);
    //
    // geocode('6565 Babcock Rd Suite 19, San Antonio, TX 78249', mapBoxKey).then(function(result){
    //     console.log(result);
    // });
    // let markerThree = new mapboxgl.Marker()
    // markerThree.setLngLat({lng: -98.614468, lat: 29.555787})
    // markerThree.addTo(map);
    // let popupThree = new mapboxgl.Popup();
    // popupThree.setHTML('<h6>Nama Ramen</h6>');
    // markerThree.setPopup(popupThree);

    let eats = [
        {
            place: 'Nama Ramen',
            food: 'Japanese',
            address: '6565 Babcock Rd Suite 19, San Antonio, TX 78249',

        },
        {
            place: 'Sichuan House',
            food: 'Authentic Chinese',
            address: '3505 Wurzbach Rd #102, San Antonio, TX 78238',
        },
        {
            place: 'Leon Valley Cafe',
            food: 'TexMex & American',
            address: '6417 Evers Rd, Leon Valley, TX 78238',
        }
    ];
    // console.log(eats[1].place);
    // console.log(eats[1].food);
    // console.log(eats[1].address);

    // eats.forEach(function(eat){
    //     console.log('Place: ' + eat.place + '\n'
    //         + 'food: ' + eat.food + '\n' +
    //     'address: ' + eat.address + '.')
    // });

    eats.forEach(function(eat){
        geocode(eat.address, mapBoxKey).then(function(result){
            let marker = new mapboxgl.Marker()
            .setLngLat(result)
            .addTo(map)
            let popup = new mapboxgl.Popup()
            .setHTML('<h6>' + eat.place + '</h6>' +
                '<h6>' + eat.food + '</h6>' +
                '<h6>' + eat.address + '</h6>')
            marker.setPopup(popup);
        });
    });

</script>

</body>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</html>